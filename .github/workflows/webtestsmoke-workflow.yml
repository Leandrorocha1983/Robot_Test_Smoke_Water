name: Run WEB Tests
run-name: On Push - Web Tests Run
on: [push]

jobs:
    web-test:
        runs-on: ubuntu-20.04
        steps:
        - name: Checlout
          uses: actions/checkout@v4

        - name: Install Python 3.10
          uses: actions/setup-python@v4
          with:
            python-version: '3.10'

        - name: Install Node.js 20.10
          uses: actions/setup-node@v3
          with:
            node-version: '20.10'

        - name: Install Requirements
          run: |
            python -m pip install --upgrade pip
            pip install -U -r requirements.txt
            sudo npm install -g npm@10.2.5
            sudo npm init playwright@latest --force
            sudo npx playwright test
            sudo npm install @playwright/tests@*
            sudo npx playwright install-deps
            rfbrowser init

        - name: Run RTSW WEB Tests
          run: |
            robot -d ./results -v HEADLESS:true -v BROWSER:chromium tests
